{# Detail info about a particular athlete, at /athletes/<athlete-id> #}
{% extends "__tabnav.html.j2" %}
{% from "__macros.html.j2" import MACRO_MAKE_TAB, MACRO_MAKE_TAB_CONTENT with context %}
{% from "/meets/_macro_meet_list.html.j2" import MEET_LIST %}


{% from "__macros.html.j2" import SHOW_MY_SCHOOL_INDICATOR %}

{% block myschool_indicator %}
  {{SHOW_MY_SCHOOL_INDICATOR(athlete.school)}}
{% endblock %}

{% block secondary_nav_title %}
  {{ athlete.fname }} {{ athlete.lname }}
{% endblock secondary_nav_title %}

{% block athlete_admin_url %}
  href="{{ url_for('')}}athlete.id }}/admin"
{% endblock athlete_admin_url %}>

{% block nav2_subtitle %}
  <div class="d-flex justify-content-md-between flex-wrap">
    <div>Division: {{ athlete.division.name }}</div>
    <div>&nbsp;&nbsp;&nbsp;&nbsp;</div>
    <div>
      School:
      <a href="{{url_for('show_school_detail', school_id= athlete.school.id) }}">
        {{ athlete.school.name }}
      </a>
    </div>
  </div>
{% endblock nav2_subtitle %}


{% block tab_navs %}
  {{ MACRO_MAKE_TAB("athlete-entries-tab", true, "Entries") }}
  {{ MACRO_MAKE_TAB("athlete-meets-tab", false, "Meets") }}
  {{ MACRO_MAKE_TAB("athlete-profile-tab", false, "Athlete Profile") }}
{% endblock tab_navs %}


{% block tab_content %}   
 
  {% call MACRO_MAKE_TAB_CONTENT("athlete-entries-tab", true) %}
    {% if athlete.entries %} 
      <ul>
        {% for entry in athlete.entries %}
          <li>
            <a href="{{ url_for('show_mde_detail', meet_id=entry.mde.meet.id,
              mde_id=entry.mde.id) }}">
              {{ entry.event.name }}
            </a>
            ===
            <a href="{{ url_for('show_mde_detail', meet_id=entry.mde.meet.id,
              mde_id=entry.mde.id) }}">
              {{ entry.division.name }}
            </a>
            ==
            <a href="{{ url_for('show_meet_detail', meet_id=entry.mde.meet.id) }}">
              {{ entry.mde.meet.name }}
            </a>
            == Seed Mark: {{ entry.mark_to_string() }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      This athlete has no entries
    {% endif %}
  {% endcall %}


  {% call MACRO_MAKE_TAB_CONTENT("athlete-meets-tab", false) %}
    {% set athlete_meets=athlete.get_meets() %}
    {% if athlete_meets %}
      {{ MEET_LIST(athlete_meets, false, "All", "athlete-meets-table") }}
    {% else %}
      This athlete is not in any meets.
    {% endif %}
  {% endcall %}


  {% call MACRO_MAKE_TAB_CONTENT("athlete-profile-tab", false) %}

      <p><strong>First name:</strong> {{ athlete.fname }}</p>
      <p><strong>Middle name:</strong> {{athlete.minitial }}</p>
      <p><strong>Last name:</strong> {{ athlete.lname }}</p>
      {# Gender: {{ athlete.gender }}<br> #}
      {# Grade: {{ athlete.grade }}<br> #}
      <p><strong>School:</strong>
        <a href="{{url_for('show_school_detail', school_id= athlete.school.id) }}">
          {{ athlete.school.name }}
        </a>
      </p>
      <p>
        <strong>Division:</strong> {{ athlete.division.name }}, 
        <strong>Division Code:</strong> {{ athlete.division.code }}</p>
      <p><strong>Phone:</strong> {{ athlete.phone }}</p>
      <p><strong>Entry Problems:</strong> {{ athlete.problem }}</p>
      <p><strong>Coach Notes:</strong> {{ athlete.coach_notes }}</p>

      <a href="{{url_for('show_edit_athlete_detail', athlete_id=athlete.id) }}">
        <button  class="btn btn-primary">
          Edit Athlete Profile
        </button>
      </a>
  {% endcall %}


{% endblock tab_content %}

{% block my_javascripts %}
  {{super()}}
  <script type="text/javascript" src="/static/js/tms-datatable.js"></script>
{% endblock my_javascripts %}

